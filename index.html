<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Simple URL Shortener</title>
  <style>
    body{font-family:system-ui,Segoe UI,Arial;margin:3rem;}
    input,button{padding:8px 10px;font-size:1rem}
    .out{margin-top:1rem}
  </style>
</head>
<body>
  <h1>URL Shortener</h1>
  <form id="shortenForm">
    <input id="url" placeholder="Enter full URL (e.g. https://example.com/long/path)" size="60"/>
    <button type="submit">Shorten</button>
  </form>
  <div class="out" id="result"></div>

  <script>
    const form = document.getElementById('shortenForm');
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const url = document.getElementById('url').value.trim();
      if(!url){ return; }
      const res = await fetch('/api/shorten', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ url })
      });
      const data = await res.json();
      if(res.ok){
        document.getElementById('result').innerHTML = `Short URL: <a href="${data.short_url}" target="_blank">${data.short_url}</a>`;
      } else {
        document.getElementById('result').textContent = 'Error: ' + (data.error || 'unknown');
      }
    });
  </script>
</body>
</html>
